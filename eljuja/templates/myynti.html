
{% extends 'layout.html'%}
{% load get_item %}

{% block title %}
    Myynti
{% endblock %}

{% block content %}
    <h2>Valitse ruokailuaika</h2>

    <form method="POST">   <!-- Lomake lähettää dataa -->
        {% csrf_token %}

        <!-- Ilmoitus jos ruoka-aikaa ei täytetty -->
        {% if aika_form.errors %}
            <div style="color: rgb(255, 217, 0);">
                {{ aika_form.errors.aika.0 }}
            </div>
        {% endif %}

        <!-- Näytetään radiovalinnat ja niiden viereen yhteenlasketut henkilömäärät kuhunkin ruokailuajankohtaan -->
        <label>
            <input type="radio" name="aika" value="1" {% if aika_form.data.aika == '1' %}checked{% endif %}> 16.30   ---    {{ passit_per_aika.1630 }} hlöä

        </label><br>

        <label> 
            <input type="radio" name="aika" value="2" {% if aika_form.data.aika == '2' %}checked{% endif %}> 17.00   ---    {{ passit_per_aika.1700 }} hlöä
        </label><br>

        <label>
            <input type="radio" name="aika" value="3" {% if aika_form.data.aika == '3' %}checked{% endif %}> 17.30   ---    {{ passit_per_aika.1730 }} hlöä
        </label><br>

        <label>
            <input type="radio" name="aika" value="4" {% if aika_form.data.aika == '4' %}checked{% endif %}> 18.00   ---    {{ passit_per_aika.1800 }} hlöä
        </label><br>

        <br>
        <!-- Täytetään kpl-valinnat jos Näytä summa -painiketta painettu -->
        {% for artikkeli in artikkelit %}
        {{ artikkeli.artikkeli }} {{ artikkeli.hinta }} €
        <input type="number" name="kpl_{{ artikkeli.id }}" min="0" step="1" value="{{ kpl_arvot|get_item:artikkeli.id|default:'0' }}">


        <br>
        {% endfor %}
        <br>
        
        <input type="submit" value="Näytä summa" name="nayta_summa"><br>
        
        <b>Summa: {{ myyntisumma }} € </b><br><br>

        <input type="submit" value="Tallenna" name="tallenna">

    </form>
    <br><br>
    <p>Myydyt tuotteet:</p>
    {% for myynti in myynnit %}
            
        {{ myynti.artikkeli }}
    <br>
    {% endfor %}

</head>
    <form> 
        {% comment %} {% for artikkeli in artikkelit %}
        <article class='artikkeli' >
            <table>
                <th href="{% url "artikkelit:lista" %}">
                    {{ artikkeli.artikkeli }} 
                </th>
                <td>{{ artikkeli.hinta }} € </td>
                <td>
                    <label for="kpl"> Kpl:</label>
                    <input type="number" id="kpl" name="Kpl" step="1">
                </td>
            </table>
        </article>
    {% endfor%}
    <input type="submit" value="Submit">
    </form> {% endcomment %}
{% endblock %}
